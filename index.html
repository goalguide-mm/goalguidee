<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GOAL GUIDE</title>

<style>
*{box-sizing:border-box;font-family:Arial}
body{margin:0;background:#0b0f14;color:#fff}

header{
  display:flex;justify-content:space-between;
  align-items:center;padding:15px 20px;
  border-bottom:2px solid #f5c400;
}

h1{color:#f5c400;margin:0}

nav button{
  background:none;border:none;
  color:#aaa;margin-left:15px;
  font-weight:bold;cursor:pointer;
}
nav .active{color:#f5c400}

.controls{
  display:flex;gap:10px;
  padding:15px 20px;
}

select,button{
  background:#111;border:1px solid #f5c400;
  color:#f5c400;padding:6px 10px;
}

main{padding:20px}

.tab{display:none}
.tab.active{display:block}

.league-title{
  margin:25px 0 10px;
  opacity:.7;
}

.card{
  background:#0f1621;
  border-radius:12px;
  padding:15px;
  margin-bottom:15px;
}

.match{
  display:flex;align-items:center;
  justify-content:space-between;
}

.team{
  display:flex;align-items:center;
  gap:8px;
}

.team img{
  width:26px;height:26px;
}

.vs{color:#f5c400;font-weight:bold}

.time{
  margin-top:8px;
  color:#f5c400;
  font-size:13px;
}

.center{text-align:center;opacity:.6}

a{color:#f5c400;text-decoration:none}

footer{
  text-align:center;
  padding:15px;
  opacity:.5;
}
</style>
</head>

<body>

<header>
  <h1>GOAL GUIDE</h1>
  <nav>
    <button class="active" onclick="showTab('fixtures',this)">FIXTURES</button>
    <button onclick="showTab('highlights',this)">HIGHLIGHTS</button>
  </nav>
</header>

<section class="controls">
  <select id="league" onchange="refresh()">
    <option value="all">All Leagues</option>
  </select>

  <select id="day" onchange="refresh()">
    <option value="today">Today</option>
    <option value="tomorrow">Tomorrow</option>
  </select>

  <button onclick="refresh()">REFRESH</button>
</section>

<main>
  <div id="fixtures" class="tab active">
    <div id="fixtureBox"></div>
  </div>

  <div id="highlights" class="tab">
    <div id="highlightBox"></div>
  </div>
</main>

<footer>
  Demo Version – Myanmar Time (MMT)
</footer>

<script>
const API = "https://www.thesportsdb.com/api/v1/json/3";

async function loadFixtures(){
  const box = document.getElementById("fixtureBox");
  box.innerHTML = "<div class='center'>Loading matches...</div>";

  const day = document.getElementById("day").value;
  const d = new Date();
  if(day==="tomorrow") d.setDate(d.getDate()+1);
  const date = d.toISOString().slice(0,10);

  const res = await fetch(API+"/eventsday.php?d="+date+"&s=Soccer");
  const data = await res.json();

  if(!data.events){
    box.innerHTML="<div class='center'>No matches</div>";
    return;
  }

  renderFixtures(data.events);
  fillLeagueSelect(data.events);
}

function renderFixtures(events){
  const box = document.getElementById("fixtureBox");
  const leagueFilter = document.getElementById("league").value;
  box.innerHTML="";

  const groups={};
  events.forEach(e=>{
    if(!groups[e.strLeague]) groups[e.strLeague]=[];
    groups[e.strLeague].push(e);
  });

  Object.keys(groups).forEach(league=>{
    if(leagueFilter!=="all" && league!==leagueFilter) return;

    box.innerHTML+=`<div class="league-title">${league}</div>`;
    groups[league].forEach(e=>{
      box.innerHTML+=card(e);
    });
  });
}

function card(e){
  return `
  <div class="card">
    <div class="match">
      <div class="team">
        <img src="${e.strHomeTeamBadge||''}">
        ${e.strHomeTeam}
      </div>
      <div class="vs">VS</div>
      <div class="team">
        ${e.strAwayTeam}
        <img src="${e.strAwayTeamBadge||''}">
      </div>
    </div>
    <div class="time">${toMMT(e.dateEvent,e.strTime)}</div>
  </div>`;
}

function fillLeagueSelect(events){
  const sel=document.getElementById("league");
  if(sel.options.length>1) return;

  [...new Set(events.map(e=>e.strLeague))].forEach(l=>{
    const o=document.createElement("option");
    o.value=o.text=l;
    sel.appendChild(o);
  });
}

function toMMT(d,t){
  if(!d||!t) return "TBA";
  const x=new Date(d+"T"+t+"Z");
  x.setMinutes(x.getMinutes()+390);
  return x.toLocaleString("en-GB",
    {day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}
  )+" MMT";
}

async function loadHighlights(){
  const box=document.getElementById("highlightBox");
  box.innerHTML="<div class='center'>Loading highlights...</div>";

  const res=await fetch("https://www.scorebat.com/video-api/v3/");
  const data=await res.json();

  box.innerHTML="";
  data.response.slice(0,25).forEach(h=>{
    box.innerHTML+=`
      <div class="card">
        <b>${h.title}</b><br>
        <a href="${h.matchviewUrl}" target="_blank">▶ Watch Highlight</a>
      </div>`;
  });
}

function showTab(tab,btn){
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  document.getElementById(tab).classList.add("active");

  document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");

  if(tab==="highlights") loadHighlights();
}

function refresh(){ loadFixtures(); }

loadFixtures();
</script>

</body>
</html>
