<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <title>GOAL GUIDE - Pro Hub</title>
    <style>
        /* အရင် Layout အတိုင်း မပြောင်းလဲဘဲ ထိန်းထားပါသည် */
        *{box-sizing:border-box}
        body{ margin:0; font-family:'Segoe UI', Arial, sans-serif; background:#0b0f14; color:#fff; }
        header{ padding:15px 20px; display:flex; justify-content:space-between; align-items:center; border-bottom:2px solid #f5c400; background: #0d121a; }
        header h1{margin:0; color:#f5c400; font-size: 24px;}
        nav button{ background:none; border:none; color:#fff; font-weight:600; cursor:pointer; margin-left:15px; opacity:.6; }
        nav button.active{ opacity:1; color:#f5c400; border-bottom: 2px solid #f5c400; }
        .controls{ padding:15px 20px; display:flex; gap:10px; background: #111823; }
        select, button.refresh-btn{ background:#1a222f; color:#f5c400; border:1px solid #f5c400; padding:8px 15px; border-radius:6px; cursor:pointer; font-weight:bold; }
        section{ display:none; padding:20px; }
        section.active{ display:block; }
        .grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:20px; }
        .card{ background:linear-gradient(145deg,#151c26,#0d121a); padding:20px; border-radius:15px; border:1px solid #2d3748; text-align:center; }
        .match{ display:flex; justify-content:space-between; align-items:center; }
        .team img{ width:35px; height:35px; display:block; margin:0 auto 5px; }
        .vs-box{ color:#f5c400; font-weight:900; }
        .live-tag{ background:#ff0000; color:#white; padding:2px 6px; border-radius:4px; font-size:10px; margin-bottom:5px; display:inline-block; }
        .video-container{ position:relative; padding-bottom:56.25%; height:0; margin-top:10px; border-radius:8px; overflow:hidden; }
        .video-container iframe{ position:absolute; width:100%; height:100%; left:0; top:0; border:0; }
        .loading{ text-align:center; padding:50px; color:#888; grid-column:1/-1; }
    </style>
</head>
<body>

<header>
    <h1>GOAL GUIDE</h1>
    <nav>
        <button class="active" onclick="changeTab('live', this)">LIVE</button>
        <button onclick="changeTab('fixtures', this)">FIXTURES</button>
        <button onclick="changeTab('highlights', this)">HIGHLIGHTS</button>
    </nav>
</header>

<div class="controls">
    <select id="leagueSelect" onchange="loadData()">
        <option value="premierleague">Premier League</option>
        <option value="laliga">La Liga</option>
        <option value="seriea">Serie A</option>
        <option value="bundesliga">Bundesliga</option>
    </select>
    <button class="refresh-btn" onclick="loadData()">REFRESH</button>
</div>

<section id="live" class="active"><div id="liveBox" class="grid"></div></section>
<section id="fixtures"><div id="fixtureBox" class="grid"></div></section>
<section id="highlights"><div id="highlightBox" class="grid"></div></section>

<script>
// API Configurations
const RAPID_KEY = "သင့်ရဲ့_RapidAPI_Key_ကိုဒီမှာထည့်ပါ"; // Screenshot ထဲက Key ထည့်ရန်
const RAPID_HOST = "free-api-live-football-data.p.rapidapi.com";
const SB_API = "https://www.scorebat.com/video-api/v3/feed/?token=MTY4OTdfMTcwNjY3Mzk3NF9mMDJiZTU3YmM0MzU0YWRiOTViYmI3ODU0YjE3Y2M1Yg==";

async function loadData() {
    const activeTab = document.querySelector('section.active').id;
    if(activeTab === 'live') fetchRapidData('live');
    if(activeTab === 'fixtures') fetchRapidData('fixtures');
    if(activeTab === 'highlights') fetchHighlights();
}

async function fetchRapidData(type) {
    const box = document.getElementById(type === 'live' ? 'liveBox' : 'fixtureBox');
    const league = document.getElementById('leagueSelect').value;
    box.innerHTML = '<div class="loading">Loading Data...</div>';

    const options = {
        method: 'GET',
        headers: {
            'x-rapidapi-key': RAPID_KEY,
            'x-rapidapi-host': RAPID_HOST
        }
    };

    try {
        // API Endpoint ကို Tab အလိုက် ပြောင်းခေါ်ခြင်း
        const endpoint = type === 'live' ? 'football-get-live-all' : 'football-get-all-fixtures-by-league';
        const response = await fetch(`https://${RAPID_HOST}/football-get-all-fixtures-by-league?leagueid=${league}`, options);
        const result = await response.json();
        const matches = result.results || [];

        box.innerHTML = "";
        if(matches.length === 0) {
            box.innerHTML = '<div class="loading">ယနေ့အတွက် ပွဲစဉ်များမရှိပါ။</div>';
            return;
        }

        matches.forEach(m => {
            box.innerHTML += `
                <div class="card">
                    ${type === 'live' ? '<span class="live-tag">LIVE</span>' : ''}
                    <div class="match">
                        <div class="team"><b>${m.home_team_name}</b></div>
                        <div class="vs-box">${m.home_score || 0} - ${m.away_score || 0}</div>
                        <div class="team"><b>${m.away_team_name}</b></div>
                    </div>
                    <div style="font-size:12px; margin-top:10px; color:#888;">${m.status || m.time}</div>
                </div>`;
        });
    } catch (error) {
        box.innerHTML = '<div class="loading">API Limit ပြည့်သွားပါပြီ။ ခဏနေမှ ပြန်စမ်းပါ။</div>';
    }
}

async function fetchHighlights() {
    const box = document.getElementById('highlightBox');
    const lName = document.getElementById('leagueSelect').options[document.getElementById('leagueSelect').selectedIndex].text;
    box.innerHTML = '<div class="loading">ဗီဒီယိုများ ရှာဖွေနေသည်...</div>';

    try {
        const res = await fetch(SB_API);
        const data = await res.json();
        const filtered = data.response.filter(v => v.competition.toLowerCase().includes(lName.toLowerCase()));

        box.innerHTML = "";
        if(filtered.length === 0) {
            box.innerHTML = `<div class="loading">${lName} Highlights မရှိသေးပါ။</div>`;
            return;
        }

        filtered.slice(0, 8).forEach(v => {
            box.innerHTML += `
                <div class="card">
                    <div style="font-weight:bold; margin-bottom:10px;">${v.title}</div>
                    <div class="video-container">${v.videos[0].embed}</div>
                </div>`;
        });
    } catch (err) {
        box.innerHTML = '<div class="loading">Highlights ခေါ်ယူ၍မရပါ။</div>';
    }
}

function changeTab(id, btn) {
    document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    btn.classList.add('active');
    loadData();
}

loadData(); // Initial load
</script>
</body>
</html>
